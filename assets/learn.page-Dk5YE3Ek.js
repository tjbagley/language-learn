import{p as n,a as i,R as A,w as P}from"./chunk-ZYFC6VSF-RoJ6bjcO.js";import{a as y,u as c}from"./react-redux-ZL9KwmXb.js";import{m as E,n as M,b as q,o as D,p as F,q as O,t as V,s as $}from"./words-phrases.slice-CVx70IhG.js";import{s as z}from"./word-lists.slice-CtHVvgYj.js";import"./redux-toolkit.modern-D-2niQ31.js";function B({size:r="small"}){return n.jsx("div",{className:`spinner spinner--${r}`,children:n.jsx("div",{className:"spinner-main",role:"status","aria-label":"Loading"})})}function G(){var j,v,w,T,_,N;const r=i.useRef(null),o=y(),[h,m]=i.useState(),e=c(s=>E(s)),L=c(s=>z(s)),d=c(s=>M(s)),[x,f]=i.useState(!1),l=c(s=>q(s));i.useEffect(()=>{u(d||"")},[]);const b=(s=>s.filter(t=>!!t).sort(()=>Math.random()-.5))([e==null?void 0:e.wordToLearn,e==null?void 0:e.choice1,e==null?void 0:e.choice2]),C=s=>{var t;m(s),s.id===((t=e==null?void 0:e.wordToLearn)==null?void 0:t.id)?o(O()):o(V())},k=()=>{x||e!=null&&e.wordToLearn&&(f(!0),setTimeout(()=>{o(F(e.wordToLearn)),u(d||""),f(!1)},100))},u=s=>{const t=s?L.find(a=>a.id===s):null,W=l==null?void 0:l.filter(a=>{var g;return(g=t==null?void 0:t.items)==null?void 0:g.some(S=>S.wordOrPhraseId===a.id)});o(D(W?W.map(a=>a.id):[])),m(void 0),I()},I=()=>{setTimeout(()=>{var s;(s=r.current)==null||s.focus()},500)},R=s=>{const t=s.target.value;o($(t)),u(t)},p=()=>n.jsxs("div",{className:"learn__selection",children:[n.jsx("label",{children:"Learn"}),n.jsxs("select",{defaultValue:d,onChange:s=>R(s),children:[n.jsx("option",{value:"",children:"Everything"}),L.map((s,t)=>n.jsx("option",{value:s.id,children:s.description},t))]})]});return e!=null&&e.wordToLearn?h?n.jsxs("div",{className:"learn",children:[p(),n.jsxs("div",{className:"learn__word",children:[n.jsx("h1",{tabIndex:-1,children:(j=e==null?void 0:e.wordToLearn)==null?void 0:j.value}),n.jsx("div",{className:"learn__sounds-like",children:(v=e==null?void 0:e.wordToLearn)==null?void 0:v.soundsLike})]}),h.id===((w=e==null?void 0:e.wordToLearn)==null?void 0:w.id)?n.jsx("div",{className:"learn__feedback--correct",children:"Correct!"}):n.jsxs(A.Fragment,{children:[n.jsx("div",{className:"learn__feedback--incorrect",children:"Incorrect"}),n.jsxs("div",{children:["Meaning: ",(T=e==null?void 0:e.wordToLearn)==null?void 0:T.meaning]})]}),n.jsx("button",{className:"learn__next-button",onClick:k,type:"button",children:x?n.jsx(B,{}):"Next"})]}):n.jsxs("div",{className:"learn",children:[p(),n.jsxs("div",{className:"learn__word",children:[n.jsx("h1",{ref:r,tabIndex:-1,children:(_=e==null?void 0:e.wordToLearn)==null?void 0:_.value}),n.jsx("div",{className:"learn__sounds-like",children:(N=e==null?void 0:e.wordToLearn)==null?void 0:N.soundsLike})]}),n.jsx("div",{className:"learn__choices",children:b.map((s,t)=>n.jsx("button",{onClick:()=>C(s),type:"button",children:s.meaning},t))})]}):null}function Y({}){return[{title:"Learn Words and Phrases"},{name:"description",content:""}]}const Z=P(function(){return n.jsx("section",{className:"centered-container",children:n.jsx(G,{})})});export{Z as default,Y as meta};
