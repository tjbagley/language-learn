import{p as t,a,R as S,w as y}from"./chunk-ZYFC6VSF-RoJ6bjcO.js";import{a as R,u as c}from"./react-redux-ZL9KwmXb.js";import{n as P,o as N,p as E,q as A,t as M}from"./words-phrases.slice-C_Jq6HP-.js";import{s as O,a as q}from"./word-lists.slice-CtHVvgYj.js";import"./redux-toolkit.modern-D-2niQ31.js";function B({size:o="small"}){return t.jsx("div",{className:`spinner spinner--${o}`,children:t.jsx("div",{className:"spinner-main",role:"status","aria-label":"Loading"})})}function D(){var j,w,v,T,_,g;const o="whatToLearnListId",d=a.useRef(null),n=R(),[l,u]=a.useState(),e=c(s=>P(s)),I=c(s=>O(s)),[h,m]=a.useState(!1),[L,W]=a.useState(localStorage.getItem(o)||""),i=c(s=>q(s,L));a.useEffect(()=>{n(N(i?i.items.map(s=>s.wordOrPhraseId):[])),p()},[n]);const b=(s=>s.filter(r=>!!r).sort(()=>Math.random()-.5))([e==null?void 0:e.wordToLearn,e==null?void 0:e.choice1,e==null?void 0:e.choice2]),C=s=>{var r;u(s),s.id===((r=e==null?void 0:e.wordToLearn)==null?void 0:r.id)?n(A()):n(M())},x=()=>{h||e!=null&&e.wordToLearn&&(m(!0),setTimeout(()=>{n(E(e.wordToLearn)),n(N(i?i.items.map(s=>s.wordOrPhraseId):[])),u(void 0),p(),m(!1)},100))},p=()=>{setTimeout(()=>{var s;(s=d.current)==null||s.focus()},500)},k=s=>{const r=s.target.value;W(r),localStorage.setItem(o,r),x()},f=()=>t.jsxs("div",{className:"learn__selection",children:[t.jsx("label",{children:"Learn"}),t.jsxs("select",{defaultValue:L,onChange:s=>k(s),children:[t.jsx("option",{value:"",children:"Everything"}),I.map((s,r)=>t.jsx("option",{value:s.id,children:s.description},r))]})]});return e!=null&&e.wordToLearn?l?t.jsxs("div",{className:"learn",children:[f(),t.jsxs("div",{className:"learn__word",children:[t.jsx("h1",{tabIndex:-1,children:(j=e==null?void 0:e.wordToLearn)==null?void 0:j.value}),t.jsx("div",{className:"learn__sounds-like",children:(w=e==null?void 0:e.wordToLearn)==null?void 0:w.soundsLike})]}),l.id===((v=e==null?void 0:e.wordToLearn)==null?void 0:v.id)?t.jsx("div",{className:"learn__feedback--correct",children:"Correct!"}):t.jsxs(S.Fragment,{children:[t.jsx("div",{className:"learn__feedback--incorrect",children:"Incorrect"}),t.jsxs("div",{children:["Meaning: ",(T=e==null?void 0:e.wordToLearn)==null?void 0:T.meaning]})]}),t.jsx("button",{className:"learn__next-button",onClick:x,type:"button",children:h?t.jsx(B,{}):"Next"})]}):t.jsxs("div",{className:"learn",children:[f(),t.jsxs("div",{className:"learn__word",children:[t.jsx("h1",{ref:d,tabIndex:-1,children:(_=e==null?void 0:e.wordToLearn)==null?void 0:_.value}),t.jsx("div",{className:"learn__sounds-like",children:(g=e==null?void 0:e.wordToLearn)==null?void 0:g.soundsLike})]}),t.jsx("div",{className:"learn__choices",children:b.map((s,r)=>t.jsx("button",{onClick:()=>C(s),type:"button",children:s.meaning},r))})]}):null}function H({}){return[{title:"Learn Words and Phrases"},{name:"description",content:""}]}const J=y(function(){return t.jsx("section",{className:"centered-container",children:t.jsx(D,{})})});export{J as default,H as meta};
