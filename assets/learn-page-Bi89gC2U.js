import{p as n,w as A,a,R as y}from"./chunk-ZYFC6VSF-Bd9_QtAq.js";import{a as E,u as i}from"./react-redux-D5JAeXUw.js";import{f as M,g as D,b as F,i as O,j as V,k as $,m as q,s as z}from"./words-phrases.slice-BXjJ2-U2.js";import{s as B}from"./word-lists.slice-gWhQ8g7e.js";import"./redux-toolkit.modern-D-2niQ31.js";function G({size:h="small"}){return n.jsx("div",{className:`spinner spinner--${h}`,children:n.jsx("div",{className:"spinner-main",role:"status","aria-label":"Loading"})})}function Y({}){return[{title:"Learn Words and Phrases"},{name:"description",content:""}]}const Z=A(function(){var v,w,T,N,_,W;const u=a.useRef(null),r=E(),[m,L]=a.useState(),e=i(s=>M(s)),x=i(s=>B(s)),c=i(s=>D(s)),[f,j]=a.useState(!1),d=i(s=>F(s));a.useEffect(()=>{l(c||"")},[]);const k=(s=>s.filter(t=>!!t).sort(()=>Math.random()-.5))([e==null?void 0:e.wordToLearn,e==null?void 0:e.choice1,e==null?void 0:e.choice2]),C=s=>{var t;L(s),s.id===((t=e==null?void 0:e.wordToLearn)==null?void 0:t.id)?r(V()):r($())},I=()=>{f||e!=null&&e.wordToLearn&&(j(!0),setTimeout(()=>{r(q(e.wordToLearn)),l(c||""),j(!1)},100))},l=s=>{const t=s?x.find(o=>o.id===s):null,g=d==null?void 0:d.filter(o=>{var b;return(b=t==null?void 0:t.items)==null?void 0:b.some(S=>S.wordOrPhraseId===o.id)});r(O(g?g.map(o=>o.id):[])),L(void 0),P()},P=()=>{setTimeout(()=>{var s;(s=u.current)==null||s.focus()},500)},R=s=>{const t=s.target.value;r(z(t)),l(t)},p=()=>n.jsxs("div",{className:"learn__selection",children:[n.jsx("label",{children:"Learn"}),n.jsxs("select",{defaultValue:c,onChange:s=>R(s),children:[n.jsx("option",{value:"",children:"Everything"}),x.map((s,t)=>n.jsx("option",{value:s.id,children:s.description},t))]})]});return e!=null&&e.wordToLearn?m?n.jsx("section",{className:"centered-container",children:n.jsxs("div",{className:"learn",children:[p(),n.jsxs("div",{className:"learn__word",children:[n.jsx("h1",{tabIndex:-1,children:(v=e==null?void 0:e.wordToLearn)==null?void 0:v.value}),n.jsx("div",{className:"learn__sounds-like",children:(w=e==null?void 0:e.wordToLearn)==null?void 0:w.soundsLike})]}),m.id===((T=e==null?void 0:e.wordToLearn)==null?void 0:T.id)?n.jsx("div",{className:"learn__feedback--correct",children:"Correct!"}):n.jsxs(y.Fragment,{children:[n.jsx("div",{className:"learn__feedback--incorrect",children:"Incorrect"}),n.jsxs("div",{children:["Meaning: ",(N=e==null?void 0:e.wordToLearn)==null?void 0:N.meaning]})]}),n.jsx("button",{className:"learn__next-button",onClick:I,type:"button",children:f?n.jsx(G,{}):"Next"})]})}):n.jsx("section",{className:"centered-container",children:n.jsxs("div",{className:"learn",children:[p(),n.jsxs("div",{className:"learn__word",children:[n.jsx("h1",{ref:u,tabIndex:-1,children:(_=e==null?void 0:e.wordToLearn)==null?void 0:_.value}),n.jsx("div",{className:"learn__sounds-like",children:(W=e==null?void 0:e.wordToLearn)==null?void 0:W.soundsLike})]}),n.jsx("div",{className:"learn__choices",children:k.map((s,t)=>n.jsx("button",{onClick:()=>C(s),type:"button",children:s.meaning},t))})]})}):null});export{Z as default,Y as meta};
