import{p as t,a,R as S,w as y}from"./chunk-ZYFC6VSF-RoJ6bjcO.js";import{a as R,u as c}from"./react-redux-ZL9KwmXb.js";import{n as E,o as P,p as A,q as M,t as q}from"./words-phrases.slice-C_Jq6HP-.js";import{s as B,a as D}from"./word-lists.slice-CtHVvgYj.js";import"./redux-toolkit.modern-D-2niQ31.js";function F({size:o="small"}){return t.jsx("div",{className:`spinner spinner--${o}`,children:t.jsx("div",{className:"spinner-main",role:"status","aria-label":"Loading"})})}function K(){var f,j,w,v,T,_;const o="whatToLearnListId",d=a.useRef(null),r=R(),[l,u]=a.useState(),e=c(s=>E(s)),N=c(s=>B(s)),[h,m]=a.useState(!1),[L,g]=a.useState(localStorage.getItem(o)||""),x=c(s=>D(s,L));a.useEffect(()=>{i()},[r]);const W=(s=>s.filter(n=>!!n).sort(()=>Math.random()-.5))([e==null?void 0:e.wordToLearn,e==null?void 0:e.choice1,e==null?void 0:e.choice2]),I=s=>{var n;u(s),s.id===((n=e==null?void 0:e.wordToLearn)==null?void 0:n.id)?r(M()):r(q())},b=()=>{h||e!=null&&e.wordToLearn&&(m(!0),setTimeout(()=>{r(A(e.wordToLearn)),i(),m(!1)},100))},i=()=>{r(P(x?x.items.map(s=>s.wordOrPhraseId):[])),u(void 0),C()},C=()=>{setTimeout(()=>{var s;(s=d.current)==null||s.focus()},500)},k=s=>{const n=s.target.value;localStorage.setItem(o,n),g(n),i()},p=()=>t.jsxs("div",{className:"learn__selection",children:[t.jsx("label",{children:"Learn"}),t.jsxs("select",{defaultValue:L,onChange:s=>k(s),children:[t.jsx("option",{value:"",children:"Everything"}),N.map((s,n)=>t.jsx("option",{value:s.id,children:s.description},n))]})]});return e!=null&&e.wordToLearn?l?t.jsxs("div",{className:"learn",children:[p(),t.jsxs("div",{className:"learn__word",children:[t.jsx("h1",{tabIndex:-1,children:(f=e==null?void 0:e.wordToLearn)==null?void 0:f.value}),t.jsx("div",{className:"learn__sounds-like",children:(j=e==null?void 0:e.wordToLearn)==null?void 0:j.soundsLike})]}),l.id===((w=e==null?void 0:e.wordToLearn)==null?void 0:w.id)?t.jsx("div",{className:"learn__feedback--correct",children:"Correct!"}):t.jsxs(S.Fragment,{children:[t.jsx("div",{className:"learn__feedback--incorrect",children:"Incorrect"}),t.jsxs("div",{children:["Meaning: ",(v=e==null?void 0:e.wordToLearn)==null?void 0:v.meaning]})]}),t.jsx("button",{className:"learn__next-button",onClick:b,type:"button",children:h?t.jsx(F,{}):"Next"})]}):t.jsxs("div",{className:"learn",children:[p(),t.jsxs("div",{className:"learn__word",children:[t.jsx("h1",{ref:d,tabIndex:-1,children:(T=e==null?void 0:e.wordToLearn)==null?void 0:T.value}),t.jsx("div",{className:"learn__sounds-like",children:(_=e==null?void 0:e.wordToLearn)==null?void 0:_.soundsLike})]}),t.jsx("div",{className:"learn__choices",children:W.map((s,n)=>t.jsx("button",{onClick:()=>I(s),type:"button",children:s.meaning},n))})]}):null}function J({}){return[{title:"Learn Words and Phrases"},{name:"description",content:""}]}const Q=y(function(){return t.jsx("section",{className:"centered-container",children:t.jsx(K,{})})});export{Q as default,J as meta};
